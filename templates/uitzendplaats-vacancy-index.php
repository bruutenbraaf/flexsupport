<?php

/**
 * Provide a view for the vacancy index page
 *
 * @link https://www.uitzendplaats.nl
 * @since 1.0.0
 *
 * @package Uitzendplaats
 * @subpackage Uitzendplaats/public/templates
 */
?>
<div class="uzp uzp_index">

	<?php
	if ($_POST && array_key_exists('uzp_vacancy_search', $_POST) && (!empty($search_query) || !empty($search_postal_code) || !empty($search_radius))) {
		$search_title = __('You searched for: ', 'uitzendplaats');
		if (!empty($search_query)) {
			$search_title .= sprintf(__(' \'%s\'', 'uitzendplaats'), $search_query);
		}
		if (!empty($search_postal_code)) {
			$search_title .= sprintf(__(' postal code \'%s\'', 'uitzendplaats'), $search_postal_code);
		}
		if (!empty($search_radius)) {
			$search_title .= sprintf(__(' radius \'%s km\'', 'uitzendplaats'), $search_radius);
		}
		echo '<p class="uzp__search-description">' . $search_title . '.</p>';


		if ($search_postal_code !== '' && $search_radius === '' || $search_postal_code === '' && $search_radius !== '') {
			echo '<div class="uzp__form-error-message">';
			_e('Both radius and postal code must be filled.', 'uitzendplaats');
			echo '</div>';
		}
	} else {
	}
	?>
	<?php if (empty($view_data) || !isset($view_data->data) || sizeof($view_data->data) === 0) { ?>
		<p><?php _e('No vacancies found', 'uitzendplaats'); ?></p>
	<?php } else { ?>
		<?php
			$item_type = __('Vacancies', 'uitzendplaats');
			include uitzendplaats_get_template('partials/pagination-header');
			?>
		<?php if (isset($view_data) && isset($view_data->data)) { ?>
			<div class="ovw-vac">
				<?php foreach ($view_data->data as $key => $item) { ?>
					<a href="<?php echo get_site_url(null, get_option('uitzendplaats-options')['uzp-vacancy-index-page'] . '/' . sanitize_title($item->title) . '/' . $item->id . '/') ?>">
						<div class="arch--vac-item">
							<div class='arch--vac-item-inner'>
								<h3><?php echo $item->title ?></h3>
								<div class="arch--inf">
									<div class="arch--loc">
										<svg width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
											<path fill-rule="evenodd" clip-rule="evenodd" d="M6.99992 1.33333C5.58543 1.33333 4.22888 1.89524 3.22868 2.89543C2.22849 3.89562 1.66659 5.25218 1.66659 6.66667C1.66659 8.73204 3.01041 10.7362 4.48389 12.2915C5.20699 13.0548 5.93236 13.6796 6.4777 14.1139C6.68066 14.2755 6.85793 14.4101 6.99992 14.5151C7.1419 14.4101 7.31918 14.2755 7.52213 14.1139C8.06747 13.6796 8.79284 13.0548 9.51595 12.2915C10.9894 10.7362 12.3333 8.73204 12.3333 6.66667C12.3333 5.25218 11.7713 3.89562 10.7712 2.89543C9.77096 1.89524 8.41441 1.33333 6.99992 1.33333ZM6.99992 15.3333C6.63012 15.888 6.62976 15.8878 6.62976 15.8878L6.62785 15.8865L6.62341 15.8835L6.60813 15.8732C6.59515 15.8644 6.57664 15.8517 6.55296 15.8353C6.50561 15.8025 6.43756 15.7547 6.35178 15.6928C6.18028 15.5689 5.93749 15.3881 5.64713 15.1569C5.06747 14.6954 4.29284 14.0286 3.51595 13.2085C1.98943 11.5972 0.333252 9.26796 0.333252 6.66667C0.333252 4.89856 1.03563 3.20286 2.28587 1.95262C3.53612 0.702379 5.23181 0 6.99992 0C8.76803 0 10.4637 0.702379 11.714 1.95262C12.9642 3.20286 13.6666 4.89856 13.6666 6.66667C13.6666 9.26796 12.0104 11.5972 10.4839 13.2085C9.70699 14.0286 8.93236 14.6954 8.3527 15.1569C8.06235 15.3881 7.81955 15.5689 7.64806 15.6928C7.56228 15.7547 7.49423 15.8025 7.44688 15.8353C7.4232 15.8517 7.40469 15.8644 7.39171 15.8732L7.37643 15.8835L7.37199 15.8865L7.37058 15.8875C7.37058 15.8875 7.36972 15.888 6.99992 15.3333ZM6.99992 15.3333L7.36972 15.888C7.14579 16.0373 6.85369 16.0371 6.62976 15.8878L6.99992 15.3333Z" />
											<path fill-rule="evenodd" clip-rule="evenodd" d="M6.99992 5.33333C6.26354 5.33333 5.66659 5.93029 5.66659 6.66667C5.66659 7.40305 6.26354 8 6.99992 8C7.7363 8 8.33325 7.40305 8.33325 6.66667C8.33325 5.93029 7.7363 5.33333 6.99992 5.33333ZM4.33325 6.66667C4.33325 5.19391 5.52716 4 6.99992 4C8.47268 4 9.66659 5.19391 9.66659 6.66667C9.66659 8.13943 8.47268 9.33333 6.99992 9.33333C5.52716 9.33333 4.33325 8.13943 4.33325 6.66667Z" />
										</svg>
										<span><?php echo $item->location; ?></span>
									</div>
									<?php if ($item->employment_type->data->name) { ?>
										<div class="arch--type">
											<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
												<g clip-path="url(#clip0)">
													<path d="M15.5881 5.03522C15.0398 4.48691 14.1477 4.48694 13.5992 5.03534C13.4305 5.20419 12.3535 6.28209 12.1889 6.44678V2.73206C12.1889 2.35644 12.0427 2.00331 11.777 1.73772L10.4512 0.411875C10.1857 0.14625 9.8325 0 9.45687 0H1.40768C0.632278 0 0.00143433 0.630844 0.00143433 1.40625V14.5938C0.00143433 15.3692 0.632278 16 1.40768 16H10.7827C11.5581 16 12.1889 15.3692 12.1889 14.5938V10.426L15.5881 7.02397C16.1377 6.47441 16.1378 5.58484 15.5881 5.03522ZM9.37647 0.9375C9.46503 0.9375 9.63568 0.922156 9.78834 1.07478L11.1142 2.40062C11.2629 2.54941 11.2515 2.71244 11.2515 2.8125H9.37647V0.9375ZM11.2514 14.5938C11.2514 14.8522 11.0412 15.0625 10.7827 15.0625H1.40768C1.14922 15.0625 0.938934 14.8522 0.938934 14.5938V1.40625C0.938934 1.14778 1.14922 0.9375 1.40768 0.9375H8.43893V3.28125C8.43893 3.54013 8.64881 3.75 8.90768 3.75H11.2514V7.38509C11.2514 7.38509 9.8685 8.76922 9.86843 8.76925L9.20584 9.43188C9.1544 9.48331 9.11559 9.54606 9.09259 9.61509L8.42965 11.6038C8.3735 11.7723 8.41734 11.958 8.5429 12.0835C8.66862 12.2093 8.8544 12.2529 9.02259 12.1968L11.0113 11.5339C11.0804 11.5109 11.1431 11.4721 11.1946 11.4206L11.2514 11.3638V14.5938ZM10.2002 9.76334L10.8631 10.4263L10.6099 10.6795L9.61553 11.0109L9.94697 10.0165L10.2002 9.76334ZM11.5259 9.76319L10.863 9.10028C11.216 8.747 12.7837 7.17787 13.1162 6.84509L13.7792 7.508L11.5259 9.76319ZM14.925 6.36119L14.4418 6.84481L13.7789 6.18191L14.2623 5.69812C14.4452 5.51534 14.7425 5.51537 14.9252 5.69812C15.1079 5.88094 15.1089 6.17728 14.925 6.36119Z" />
													<path d="M8.90681 4.6875H2.34431C2.08543 4.6875 1.87556 4.89737 1.87556 5.15625C1.87556 5.41513 2.08543 5.625 2.34431 5.625H8.90681C9.16568 5.625 9.37556 5.41513 9.37556 5.15625C9.37556 4.89737 9.16568 4.6875 8.90681 4.6875Z" />
													<path d="M7.03181 6.5625H2.34431C2.08543 6.5625 1.87556 6.77237 1.87556 7.03125C1.87556 7.29013 2.08543 7.5 2.34431 7.5H7.03181C7.29068 7.5 7.50056 7.29013 7.50056 7.03125C7.50056 6.77237 7.29068 6.5625 7.03181 6.5625Z" />
													<path d="M7.03181 8.4375H2.34431C2.08543 8.4375 1.87556 8.64737 1.87556 8.90625C1.87556 9.16513 2.08543 9.375 2.34431 9.375H7.03181C7.29068 9.375 7.50056 9.16513 7.50056 8.90625C7.50056 8.64737 7.29068 8.4375 7.03181 8.4375Z" />
													<path d="M7.03181 10.3125H2.34431C2.08543 10.3125 1.87556 10.5224 1.87556 10.7812C1.87556 11.0401 2.08543 11.25 2.34431 11.25H7.03181C7.29068 11.25 7.50056 11.0401 7.50056 10.7812C7.50056 10.5224 7.29068 10.3125 7.03181 10.3125Z" />
													<path d="M8.90681 13.1875H6.09431C5.83544 13.1875 5.62556 13.3974 5.62556 13.6562C5.62556 13.9151 5.83544 14.125 6.09431 14.125H8.90681C9.16569 14.125 9.37556 13.9151 9.37556 13.6562C9.37556 13.3974 9.16569 13.1875 8.90681 13.1875Z" />
												</g>
												<defs>
													<clipPath id="clip0">
														<rect width="16" height="16" />
													</clipPath>
												</defs>
											</svg>
											<span><?php echo $item->employment_type->data->name; ?></span>
										</div>
									<?php } ?>
									<?php if ($item->education->data) { ?>
										<div class="arch--niv">
											<svg width="20" height="20" viewBox="0 0 512 478" fill="none" xmlns="http://www.w3.org/2000/svg">
												<path d="M360.465 426.988C355.891 425.827 351.258 428.626 350.123 433.192L341.59 467.325C340.438 471.907 343.228 476.532 347.802 477.676C348.493 477.855 349.193 477.932 349.876 477.932C353.699 477.932 357.172 475.346 358.145 471.472L366.678 437.339C367.821 432.765 365.039 428.132 360.465 426.988Z" />
												<path d="M256 256.066C257.109 256.066 258.219 255.853 259.26 255.418L353.127 216.574C357.479 214.773 359.544 209.781 357.744 205.429C355.943 201.068 350.934 199.02 346.591 200.804L256 238.299L17.067 139.432V136.599C17.067 131.889 13.244 128.066 8.534 128.066C3.824 128.066 0 131.889 0 136.599V145.132C0 148.588 2.082 151.703 5.274 153.017L252.741 255.417C253.781 255.852 254.891 256.066 256 256.066Z"   />
												<path d="M357.513 343.49C355.431 339.266 350.328 337.525 346.087 339.616C329.882 347.629 302.814 356.947 264.534 358.219V281.666C264.534 276.956 260.711 273.133 256.001 273.133C251.291 273.133 247.468 276.956 247.468 281.666V358.142C141.51 354.763 107.317 290.575 102.401 279.891V221.933C102.401 217.223 98.578 213.4 93.868 213.4C89.158 213.4 85.335 217.223 85.335 221.933V281.666C85.335 282.75 85.54 283.825 85.941 284.84C87.426 288.535 123.744 375.532 256.002 375.532C302.227 375.532 334.62 364.319 353.649 354.915C357.879 352.825 359.612 347.714 357.513 343.49Z"   />
												<path d="M384 435.266C379.281 435.266 375.467 439.089 375.467 443.799V469.399C375.467 474.109 379.281 477.932 384 477.932C388.719 477.932 392.533 474.109 392.533 469.399V443.799C392.533 439.089 388.719 435.266 384 435.266Z"   />
												<path d="M503.467 128.066C498.748 128.066 494.934 131.889 494.934 136.599V139.415L392.534 181.561V166.141L506.727 118.883C509.918 117.569 512.001 114.454 512.001 110.998C512.001 107.542 509.919 104.436 506.736 103.113L259.26 0.713883C257.169 -0.148117 254.831 -0.148117 252.741 0.713883L5.274 103.114C2.082 104.437 0 107.543 0 110.999C0 114.455 2.082 117.57 5.274 118.884L252.741 221.284C253.782 221.719 254.891 221.933 256.001 221.933C257.111 221.933 258.22 221.72 259.261 221.284L348.742 184.258C353.103 182.466 355.168 177.474 353.367 173.113C351.566 168.761 346.574 166.704 342.222 168.496L256 204.166L30.848 110.999L256 17.8319L481.152 110.999L383.181 151.541L289.34 116.503C289.835 114.728 290.134 112.902 290.134 110.999C290.134 96.6459 275.141 85.3989 256.001 85.3989C236.861 85.3989 221.868 96.6459 221.868 110.999C221.868 125.352 236.861 136.599 256.001 136.599C264.543 136.599 272.163 134.269 278.085 130.515L375.467 166.876V194.217V194.226V377.104C365.56 380.645 358.4 390.023 358.4 401.134C358.4 415.248 369.886 426.734 384 426.734C398.114 426.734 409.6 415.248 409.6 401.134C409.6 390.024 402.441 380.646 392.533 377.104V328.669C417.032 310.177 425.813 285.55 426.197 284.458C426.504 283.562 426.666 282.615 426.666 281.668V221.935C426.666 217.225 422.852 213.402 418.133 213.402C413.414 213.402 409.6 217.225 409.6 221.935V280.09C408.124 283.708 402.995 294.861 392.533 305.869V200.019L506.718 153.026C509.918 151.712 512 148.589 512 145.133V136.6C512 131.889 508.186 128.066 503.467 128.066ZM256 119.532C245.581 119.532 238.933 114.48 238.933 110.999C238.933 107.517 245.58 102.466 256 102.466C266.42 102.466 273.067 107.518 273.067 110.999C273.067 114.481 266.419 119.532 256 119.532ZM384 409.666C379.29 409.666 375.467 405.835 375.467 401.133C375.467 396.431 379.29 392.6 384 392.6C388.71 392.6 392.533 396.431 392.533 401.133C392.533 405.834 388.71 409.666 384 409.666Z"   />
												<path d="M417.877 433.192C416.734 428.627 412.091 425.836 407.535 426.988C402.961 428.131 400.179 432.765 401.323 437.339L409.856 471.472C410.829 475.346 414.302 477.932 418.125 477.932C418.808 477.932 419.507 477.855 420.199 477.676C424.773 476.533 427.555 471.907 426.411 467.325L417.877 433.192Z"   />
											</svg>
											<?php
															foreach ($item->education->data as $key => $edu) {
																echo $edu->name;
																if ($key < count($item->education->data) - 1) {
																	echo ', ';
																}
															}
															?>
										</div>
									<?php } ?>

								</div>
								<div class="arch--arr">
									<span><?php _e('Bekijk vacature', 'talentplaats'); ?></span>
									<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
										<path d="M5 12H19" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
										<path d="M12 5L19 12L12 19" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
									</svg>
								</div>
							</div>
						</div>
					</a>
				<?php } ?>
			</div>
		<?php } ?>
	<?php } ?>
</div>
<div class="row">
	<div class="col-md-12 d-flex justify-content-center pagination">
		<?php
		// Pagination
		if ($pagination) {
			include uitzendplaats_get_template('partials/pagination');
		}
		?>
	</div>
</div>